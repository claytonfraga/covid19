dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias", n=1000,dfOriginal=dfBrasil)
require(ggrepel)
require(data.table)
require(plotly)
source("funcoes.r")
configuracao = getConfiguracoes()
subtitulo = configuracao$fonte
dfBrasil = leDadosBrasil(padrao = FALSE, hoje)
dfBrasil$day = yday(dfBrasil$date)
DT <- data.table(dfBrasil)
DT[, day := sequence(.N)-1, by = c("location")]
dfBrasil = as.data.frame(DT)
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias", n=1000,dfOriginal=dfBrasil)
require(ggrepel)
require(data.table)
require(plotly)
source("funcoes.r")
configuracao = getConfiguracoes()
subtitulo = configuracao$fonte
dfBrasil = leDadosBrasil(padrao = FALSE, hoje)
dfBrasil$day = yday(dfBrasil$date)
DT <- data.table(dfBrasil)
DT[, day := sequence(.N)-1, by = c("location")]
dfBrasil = as.data.frame(DT)
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias", n=1000,dfOriginal=dfBrasil)
require(ggrepel)
require(data.table)
require(plotly)
source("funcoes.r")
configuracao = getConfiguracoes()
subtitulo = configuracao$fonte
dfBrasil = leDadosBrasil(padrao = FALSE, hoje)
dfBrasil$day = yday(dfBrasil$date)
DT <- data.table(dfBrasil)
DT[, day := sequence(.N)-1, by = c("location")]
dfBrasil = as.data.frame(DT)
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias", n=1000,dfOriginal=dfBrasil)
require(ggrepel)
require(data.table)
require(plotly)
source("funcoes.r")
configuracao = getConfiguracoes()
subtitulo = configuracao$fonte
dfBrasil = leDadosBrasil(padrao = FALSE, hoje)
dfBrasil$day = yday(dfBrasil$date)
DT <- data.table(dfBrasil)
DT[, day := sequence(.N)-1, by = c("location")]
dfBrasil = as.data.frame(DT)
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias", n=1000,dfOriginal=dfBrasil)
require(ggrepel)
require(data.table)
require(plotly)
source("funcoes.r")
configuracao = getConfiguracoes()
subtitulo = configuracao$fonte
dfBrasil = leDadosBrasil(padrao = FALSE, hoje)
dfBrasil$day = yday(dfBrasil$date)
DT <- data.table(dfBrasil)
DT[, day := sequence(.N)-1, by = c("location")]
dfBrasil = as.data.frame(DT)
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias", n=1000,dfOriginal=dfBrasil)
require(ggrepel)
require(data.table)
require(plotly)
source("funcoes.r")
configuracao = getConfiguracoes()
subtitulo = configuracao$fonte
dfBrasil = leDadosBrasil(padrao = FALSE, hoje)
dfBrasil$day = yday(dfBrasil$date)
DT <- data.table(dfBrasil)
DT[, day := sequence(.N)-1, by = c("location")]
dfBrasil = as.data.frame(DT)
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias", n=1000,dfOriginal=dfBrasil)
require(ggrepel)
require(data.table)
require(plotly)
source("funcoes.r")
configuracao = getConfiguracoes()
subtitulo = configuracao$fonte
dfBrasil = leDadosBrasil(padrao = FALSE, hoje)
dfBrasil$day = yday(dfBrasil$date)
DT <- data.table(dfBrasil)
DT[, day := sequence(.N)-1, by = c("location")]
dfBrasil = as.data.frame(DT)
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias", n=1000,dfOriginal=dfBrasil)
require(ggrepel)
require(data.table)
require(plotly)
source("funcoes.r")
configuracao = getConfiguracoes()
subtitulo = configuracao$fonte
dfBrasil = leDadosBrasil(padrao = FALSE, hoje)
dfBrasil$day = yday(dfBrasil$date)
DT <- data.table(dfBrasil)
DT[, day := sequence(.N)-1, by = c("location")]
dfBrasil = as.data.frame(DT)
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias", n=1000,dfOriginal=dfBrasil)
require(ggrepel)
require(data.table)
require(plotly)
source("funcoes.r")
configuracao = getConfiguracoes()
subtitulo = configuracao$fonte
dfBrasil = leDadosBrasil(padrao = FALSE, hoje)
dfBrasil$day = yday(dfBrasil$date)
DT <- data.table(dfBrasil)
DT[, day := sequence(.N)-1, by = c("location")]
dfBrasil = as.data.frame(DT)
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias", n=1000,dfOriginal=dfBrasil)
require(ggrepel)
require(data.table)
require(plotly)
source("funcoes.r")
configuracao = getConfiguracoes()
subtitulo = configuracao$fonte
dfBrasil = leDadosBrasil(padrao = FALSE, hoje)
dfBrasil$day = yday(dfBrasil$date)
DT <- data.table(dfBrasil)
DT[, day := sequence(.N)-1, by = c("location")]
dfBrasil = as.data.frame(DT)
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias", n=1000,dfOriginal=dfBrasil)
require(ggrepel)
require(data.table)
require(plotly)
source("funcoes.r")
configuracao = getConfiguracoes()
subtitulo = configuracao$fonte
dfBrasil = leDadosBrasil(padrao = FALSE, hoje)
dfBrasil$day = yday(dfBrasil$date)
DT <- data.table(dfBrasil)
DT[, day := sequence(.N)-1, by = c("location")]
dfBrasil = as.data.frame(DT)
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias", n=1000,dfOriginal=dfBrasil)
require(ggrepel)
require(data.table)
require(plotly)
source("funcoes.r")
configuracao = getConfiguracoes()
subtitulo = configuracao$fonte
dfBrasil = leDadosBrasil(padrao = FALSE, hoje)
dfBrasil$day = yday(dfBrasil$date)
DT <- data.table(dfBrasil)
DT[, day := sequence(.N)-1, by = c("location")]
dfBrasil = as.data.frame(DT)
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias", n=1000,dfOriginal=dfBrasil)
plotaDeathsByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil)
require(ggrepel)
require(data.table)
require(plotly)
source("funcoes.r")
configuracao = getConfiguracoes()
subtitulo = configuracao$fonte
dfBrasil = leDadosBrasil(padrao = FALSE, hoje)
dfBrasil$day = yday(dfBrasil$date)
DT <- data.table(dfBrasil)
DT[, day := sequence(.N)-1, by = c("location")]
dfBrasil = as.data.frame(DT)
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias", n=1000,dfOriginal=dfBrasil)
plotaDeathsByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil)
require(ggrepel)
require(data.table)
require(plotly)
source("funcoes.r")
configuracao = getConfiguracoes()
subtitulo = configuracao$fonte
plotaCasosBrasil <- function(hoje = Sys.Date()) {
dfBrasil = leDadosBrasil(padrao = FALSE, hoje)
dfBrasil$day = yday(dfBrasil$date)
DT <- data.table(dfBrasil)
DT[, day := sequence(.N)-1, by = c("location")]
dfBrasil = as.data.frame(DT)
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil, hoje = hoje)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias", n=1000,dfOriginal=dfBrasil, hoje = hoje)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosObitos_10dias", n=1000,dfOriginal=dfBrasil, hoje = hoje)
}
plotaCasosBrasil(hoje = Sys.Date()-1)
plotaCasosBrasil(hoje = Sys.Date()-2)
for (i in 1:10) {
plotaCasosBrasil(hoje = Sys.Date()-n)
}
for (i in 1:10) {
plotaCasosBrasil(hoje = Sys.Date()-i)
}
source("funcoes.r")
for (i in 1:10) {
plotaCasosBrasil(hoje = Sys.Date()-i)
}
source("funcoes.r")
for (i in seq(1, 100, 10)) {
plotaCasosBrasil(hoje = Sys.Date()-i)
}
source("funcoes.r")
for (i in seq(1, 100, 10)) {
tryCatch(
{
plotaCasosBrasil(hoje = Sys.Date()-i)
},
error=function(cond) {
message(paste("\n\t\tNao foi possivel processar estimaBrasil.r: \n", cond))
})
}
plota10DiasBrasil <- function(hoje = Sys.Date()) {
dfBrasil = leDadosBrasil(padrao = FALSE, hoje)
dfBrasil$day = yday(dfBrasil$date)
DT <- data.table(dfBrasil)
DT[, day := sequence(.N)-1, by = c("location")]
dfBrasil = as.data.frame(DT)
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias",dfOriginal=dfBrasil, hoje = hoje)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosCasos_10dias", n=1000,dfOriginal=dfBrasil, hoje = hoje)
plotaCasesByDate2(dfDezDiasBrazil, "ufs_todosObitos_10dias", n=1000,dfOriginal=dfBrasil, hoje = hoje)
}
plotaDeathsByDate2(dfDezDiasBrazil, "ufs_todosObitos_10dias", n=1000,dfOriginal=dfBrasil, hoje = hoje)
hoje
source("plota10DiasBrasil.r")
tryCatch(
{
cat("\nExecutando: plotplota10DiasBrasil ...")
plota10DiasBrasil(hoje = hoje)
},
error=function(cond) {
message(paste("\n\t\tFalha: plota10DiasBrasil: \n", cond))
})
require(ggrepel)
require(data.table)
require(plotly)
source("funcoes.r")
configuracao = getConfiguracoes()
subtitulo = configuracao$fonte
hoje = Sys.Date() - as.numeric(configuracao$dias)
#dfDezDias = dfInteresse[dfInteresse$day%%10==0,]
load(file="dezdias.RData")
dfDezDias$data = dfDezDias$date
dfDezDias$dia = dfDezDias$day
dfDezDias$day = as.factor(dfDezDias$day)
dfDezDias$eixoX = paste0(dfDezDias$day," dias\n", format(dfDezDias$date, format = "%d/%m/%Y"))
plotaCasesByDate2(dfDezDias[dfDezDias$location=="Brazil",],
"todosCasosBrazil_10dias",
dfOriginal=dfOriginal[dfOriginal$location=="Brazil",]
)
plotaCasesByDate2(dfDezDias[dfDezDias$location=="Italy",],
"todosCasosItaly_10dias",
dfOriginal=dfOriginal[dfOriginal$location=="Italy",]
)
plotaCasesByDate2(dfDezDias[dfDezDias$location=="Spain",],
"todosCasosSpain_10dias",
dfOriginal=dfOriginal[dfOriginal$location=="Spain",]
)
plotaCasesByDate2(dfDezDias, "todosCasos_10dias",dfOriginal=dfOriginal)
plotaCasesByDate2(dfDezDias, "todosCasos_10dias", n=1000,dfOriginal=dfOriginal)
plotaDeathsByDate2(dfDezDias[dfDezDias$location=="Brazil",],
"todosObitosBrazil_10dias",
dfOriginal=dfOriginal[dfOriginal$location=="Brazil",]
)
plotaDeathsByDate2(dfDezDias[dfDezDias$location=="Italy",],
"todosObitosItaly_10dias",
dfOriginal=dfOriginal[dfOriginal$location=="Italy",]
)
plotaDeathsByDate2(dfDezDias[dfDezDias$location=="Spain",],
"todosObitosSpain_10dias",
dfOriginal=dfOriginal[dfOriginal$location=="Spain",]
)
plotaDeathsByDate2(dfDezDias, "todosObitos_10dias",dfOriginal=dfOriginal)
dfDezDias %>% ggplot(aes(x=day, y=total_cases, size = total_cases, color=location, label=total_cases)) +
geom_point(alpha=0.9) +
scale_size(range = c(5, 25), name="Total de Casos")+
xlab("A cada 10 dias desde o primeiro caso") +
ylab("Total de Casos") +
geom_text_repel(size=3, color="black", force=3, nudge_y=0.2,nudge_x=0.2, max.iter=1000) +
theme(
legend.position="bottom",
plot.title=element_text(hjust=0.5),
plot.subtitle=element_text(hjust=0.5),
axis.text.x = element_text(angle = 90)
)+
labs(color = "Paises")
pasta = paste0(configuracao$pastaDropbox,"wide/")
nomeGrafico = paste0(pasta,"caso_sbolhas_", hoje, ".jpg")
ggsave(nomeGrafico, width = 16, height = 9, units = "in",dpi = 100)
#################################################################
#TODO: Removendo plotagem de gráfico de bolhas
#plotaBolhaDeaths(dfDezDias, 0)
#plotaBolhaDeaths(dfDezDias, 100)
#plotaBolhaDeaths(dfDezDias, 1000)
source("plota10DiasBrasil.r")
source("plota10DiasBrasil.r")
for (i in seq(1, 100, 10)) {
tryCatch(
{
plota10DiasBrasil(hoje = Sys.Date() - i)
},
error=function(cond) {
message(paste("\n\t\tNao foi possivel processar algunsMunicipios.r: \n", cond))
})
}
hoje = Sys.Date() -1
dfBrasil = leDadosBrasil(padrao = FALSE, hoje)
dfBrasil$day = yday(dfBrasil$date)
DT <- data.table(dfBrasil)
DT[, day := sequence(.N)-1, by = c("location")]
dfBrasil = as.data.frame(DT)
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
dfDezDiasBrazil[dfDezDiasBrazil$location=="ES",]
dfDezDiasBrazil[dfDezDiasBrazil$location=="AC",]
dfDezDiasBrazil[dfDezDiasBrazil$location=="AL",]
dfDezDiasBrazil[dfDezDiasBrazil$location=="MG",]
dfDezDiasBrazil[dfDezDiasBrazil$total_cases<0,]
dfDezDiasBrazil[dfDezDiasBrazil$total_cases>0,]
source("plota10DiasBrasil.r")
for (i in seq(1, 100, 10)) {
tryCatch(
{
plota10DiasBrasil(hoje = Sys.Date() - i)
},
error=function(cond) {
message(paste("\n\t\tNao foi possivel processar algunsMunicipios.r: \n", cond))
})
}
plota10DiasBrasil <- function(hoje = Sys.Date()) {
dfBrasil = leDadosBrasil(padrao = FALSE, hoje)
dfBrasil$day = yday(dfBrasil$date)
#  DT <- data.table(dfBrasil)
#  DT[, day := sequence(.N)-1, by = c("location")]
#  dfBrasil = as.data.frame(DT)
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
dfCases = dfDezDiasBrazil[dfDezDiasBrazil$total_cases>0,]
dfDeaths = dfDezDiasBrazil[dfDezDiasBrazil$total_deaths>0,]
plotaCasesByDate2(dfCases, "ufs_todosCasos_10dias",dfOriginal=dfBrasil, hoje = hoje)
plotaCasesByDate2(dfCases, "ufs_todosCasos_10dias", n=10000,dfOriginal=dfBrasil, hoje = hoje)
plotaDeathsByDate2(dfDeaths, "ufs_todosObitos_10dias",dfOriginal=dfBrasil, hoje = hoje)
plotaDeathsByDate2(dfDeaths, "ufs_todosObitos_10dias", n=10000,dfOriginal=dfBrasil, hoje = hoje)
}
for (i in seq(1, 100, 10)) {
tryCatch(
{
plota10DiasBrasil(hoje = Sys.Date() - i)
},
error=function(cond) {
message(paste("\n\t\tNao foi possivel processar algunsMunicipios.r: \n", cond))
})
}
dfBrasil = leDadosBrasil(padrao = FALSE, as.Date("2020-05-21"))
dfBrasil$day = yday(dfBrasil$date)
DT <- data.table(dfBrasil)
DT[, day := sequence(.N)-1, by = c("location")]
dfBrasil = as.data.frame(DT)
dfBrasil
dfDezDiasBrazil = dfBrasil[dfBrasil$day%%10==0,]
dfDezDiasBrazil$data = dfDezDiasBrazil$date
dfDezDiasBrazil$dia = dfDezDiasBrazil$day
dfDezDiasBrazil$day = as.factor(dfDezDiasBrazil$day)
summary(dfDezDiasBrazil)
dfDezDiasBrazil$eixoX = paste0(dfDezDiasBrazil$day," dias\n", format(dfDezDiasBrazil$date, format = "%d/%m/%Y"))
dfCases = dfDezDiasBrazil[dfDezDiasBrazil$total_cases>0,]
dfDeaths = dfDezDiasBrazil[dfDezDiasBrazil$total_deaths>0,]
summary(dfCases)
plotaCasesByDate2(dfCases, "ufs_todosCasos_10dias",dfOriginal=dfBrasil, hoje = as.Date("2020-05-21"))
plotaCasesByDate2(dfCases, "ufs_todosCasos_10dias", n=10000,dfOriginal=dfBrasil, hoje = hoje)
cases = 10000
deaths = 5000
dfCasesFiltrado = dfDezDiasBrazil[dfDezDiasBrazil$total_cases>,cases]
dfDeathsFiltrado = dfDezDiasBrazil[dfDezDiasBrazil$total_deaths>deaths,]
plotaCasesByDate2(dfCases, "ufs_todosCasos_10dias",dfOriginal=dfBrasil, hoje = hoje)
if (nrow(dfCasesFiltrado)>0) {
plotaCasesByDate2(dfCasesFiltrado, "ufs_todosCasos_10dias", n=cases,dfOriginal=dfBrasil, hoje = hoje)
}
plotaDeathsByDate2(dfDeaths, "ufs_todosObitos_10dias",dfOriginal=dfBrasil, hoje = hoje)
if (nrow(dfDeathsFiltrado)>0) {
plotaDeathsByDate2(dfDeathsFiltrado, "ufs_todosObitos_10dias", n=deaths,dfOriginal=dfBrasil, hoje = hoje)
}
cases = 10000
deaths = 5000
dfCasesFiltrado = dfDezDiasBrazil[dfDezDiasBrazil$total_cases>cases,]
dfDeathsFiltrado = dfDezDiasBrazil[dfDezDiasBrazil$total_deaths>deaths,]
plotaCasesByDate2(dfCases, "ufs_todosCasos_10dias",dfOriginal=dfBrasil, hoje = hoje)
if (nrow(dfCasesFiltrado)>0) {
plotaCasesByDate2(dfCasesFiltrado, "ufs_todosCasos_10dias", n=cases,dfOriginal=dfBrasil, hoje = hoje)
}
plotaDeathsByDate2(dfDeaths, "ufs_todosObitos_10dias",dfOriginal=dfBrasil, hoje = hoje)
if (nrow(dfDeathsFiltrado)>0) {
plotaDeathsByDate2(dfDeathsFiltrado, "ufs_todosObitos_10dias", n=deaths,dfOriginal=dfBrasil, hoje = hoje)
}
cases = 10000
deaths = 2000
dfCasesFiltrado = dfDezDiasBrazil[dfDezDiasBrazil$total_cases>cases,]
dfDeathsFiltrado = dfDezDiasBrazil[dfDezDiasBrazil$total_deaths>deaths,]
plotaCasesByDate2(dfCases, "ufs_todosCasos_10dias",dfOriginal=dfBrasil, hoje = hoje)
if (nrow(dfCasesFiltrado)>0) {
plotaCasesByDate2(dfCasesFiltrado, "ufs_todosCasos_10dias", n=cases,dfOriginal=dfBrasil, hoje = hoje)
}
plotaDeathsByDate2(dfDeaths, "ufs_todosObitos_10dias",dfOriginal=dfBrasil, hoje = hoje)
if (nrow(dfDeathsFiltrado)>0) {
plotaDeathsByDate2(dfDeathsFiltrado, "ufs_todosObitos_10dias", n=deaths,dfOriginal=dfBrasil, hoje = hoje)
}
hoje
source("plota10DiasBrasil.r")
for (i in seq(1, 100, 10)) {
tryCatch(
{
plota10DiasBrasil(hoje = Sys.Date() - i)
},
error=function(cond) {
message(paste("\n\t\tNao foi possivel processar algunsMunicipios.r: \n", cond))
})
}
source("conoravirus.r")
source("conoravirus.r")
source("estima.r")
x = estima(palpitesDe = palpitesDe, pais = "Brazil", ndias = dias)
dias
palpitesDe = "United.States"
x = estima(palpitesDe = palpitesDe, pais = "Brazil", ndias = dias)
source("conoravirus.r")
